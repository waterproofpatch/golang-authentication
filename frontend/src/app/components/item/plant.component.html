<mat-card *ngIf="plant != null" [class.plant-mine]="plant.email==email" [class.plant-theirs]="plant.email != email">
	<mat-card-header>
		<div mat-card-avatar class="plant-header-image" *ngIf="isCondensed">
			<img *ngIf="isImageLoading" mat-card-image [src]="'/assets/loading.gif'" alt="Photo">
			<img *ngIf="!isImageLoading && imageUrl != null" mat-card-image [src]="imageUrl" alt="Photo">
			<img *ngIf="!isImageLoading && imageUrl == null" [src]="'/assets/placeholder.jpg'" alt="Image">
		</div>
		<mat-card-title *ngIf="!isCondensed">{{plant.name}}</mat-card-title>
		<mat-card-subtitle *ngIf="isCondensed">{{plant.name}} <p *ngIf="isCondensed && needsWatering"
				[style.color]="backgroundColor">
				Needs Watering</p></mat-card-subtitle>
		<mat-card-subtitle *ngIf="!isCondensed">by {{plant.username}}</mat-card-subtitle>
		<mat-card-subtitle *ngIf="!isCondensed">Water every {{plant.wateringFrequency}}
			days</mat-card-subtitle>
		<!-- <mat-icon *ngIf="!plant.isPublic" class="lock-icon">lock</mat-icon>
		<mat-icon *ngIf="plant.isPublic" class="lock-icon">lock_open</mat-icon> -->
		<div class="menu-icon" *ngIf="isCondensed && plant.email == email">

			<button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
				<mat-icon>more_vert</mat-icon>
			</button>
			<mat-menu #menu="matMenu">
				<button mat-menu-item (click)="editPlant()"
					color="primary"><mat-icon>edit</mat-icon><span>Edit</span></button>
				<button mat-menu-item (click)="waterPlant()" color="primary"><mat-icon
						style="color:blue;">
						local_drink</mat-icon><span>Water</span></button>
				<button mat-menu-item (click)="deletePlant()" color="warn">
					<mat-icon>delete_outline</mat-icon><span>Delete</span></button>
				<a mat-button [routerLink]="['/comments', plant.id]"><mat-icon>
						comment</mat-icon><span>Comments ({{numComments |
						async}})</span></a>
			</mat-menu>
		</div>
	</mat-card-header>
	<div *ngIf="!isCondensed">

		<img *ngIf="isImageLoading" mat-card-image [src]="'/assets/loading.gif'" alt="Photo">
		<img *ngIf="!isImageLoading && imageUrl != null" mat-card-image [src]="imageUrl" alt="Photo">
		<img *ngIf="!isImageLoading && imageUrl == null" [src]="'/assets/placeholder.jpg'" alt="Image">
	</div>
	<mat-card-content>
		<div class="water-times" *ngIf="!isCondensed">
			<span class="left">

				<mat-card-subtitle>Last watered on
					{{transformLastWaterDate()}}</mat-card-subtitle>
			</span>
			<span class="right">

				<mat-card-subtitle [style.color]="backgroundColor">Next watering on
					{{getNextWaterDate()}}</mat-card-subtitle>
			</span>
		</div>
	</mat-card-content>
	<mat-card-actions *ngIf="!isCondensed">
		<a mat-button [routerLink]="['/comments', plant.id]">Comments ({{numComments | async}})</a>
	</mat-card-actions>
	<mat-card-actions *ngIf="plant.email==email && !isCondensed">
		<button mat-button (click)="deletePlant()" color="warn">Delete</button>
		<button mat-button (click)="waterPlant()" color="primary">Water</button>
		<button mat-button (click)="editPlant()" color="primary">Edit</button>
	</mat-card-actions>
	<mat-accordion *ngIf="plant.email==email">
		<mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
			<mat-expansion-panel-header>
				<mat-panel-title>
					Log
				</mat-panel-title>
				<!-- <mat-panel-description>
					Plant log coming soon!
				</mat-panel-description> -->
			</mat-expansion-panel-header>
			<p>Coming soon!</p>
		</mat-expansion-panel>
	</mat-accordion>

</mat-card>