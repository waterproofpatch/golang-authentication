FROM golang:1.18-alpine AS build

RUN apk add python3 tzdata
RUN go install github.com/cosmtrek/air@latest
WORKDIR /app/src

COPY src/email_service/main.py /email_service/
COPY src/email_service/requirements.txt /email_service/
WORKDIR /email_service
RUN python3 -m venv venv
RUN venv/bin/python -m pip install -r requirements.txt

ENV SITE_TIMESTAMP="notes-2_8be7d2a_12/09/23 02:32:37"

WORKDIR /app/src